[Back to Prometheus](../../README.md)

Prometheus Alertmanager is a tool that handles alerts generated by Prometheus, allowing users to route, notify, and manage these alerts efficiently.

<br />

---

- [Installation](#installation)
- [Uninstallation](#uninstallation)

<br />

# Installation

To install Prometheus Alertmanager, run:

```bash
./scripts/prometheus/alerts/prometheus_alert_setup.sh
```

> IMPORTANT: <br />
> Some options are mandatory, so please use the help to see what is possible

To see the option, run

```bash
./scripts/prometheus/alerts/prometheus_alert_setup.sh -h
```

Next, start it with:

```bash
./scripts/prometheus/alerts/prometheus_alert_start.sh
```

To check the service is up and running

```bash
sudo systemctl status alertmanager
```

You should see something like

```bash
● alertmanager.service - Alertmanager
     Loaded: loaded (/etc/systemd/system/alertmanager.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2024-07-09 17:35:15 CEST; 58s ago
   Main PID: 59520 (alertmanager)
      Tasks: 9 (limit: 19117)
     Memory: 13.9M
        CPU: 206ms
     CGroup: /system.slice/alertmanager.service
             └─59520 /usr/local/bin/alertmanager --config.file=/etc/alertmanager/alertmanager.yml --storage.path=/var/lib/alertmanager/ --cluster.advertise-a>

Jul 09 17:35:15 vmi1561561.contaboserver.net systemd[1]: Started Alertmanager.
Jul 09 17:35:15 vmi1561561.contaboserver.net alertmanager[59520]: ts=2024-07-09T15:35:15.645Z caller=main.go:240 level=info msg="Starting Alertmanager" versi>
Jul 09 17:35:15 vmi1561561.contaboserver.net alertmanager[59520]: ts=2024-07-09T15:35:15.646Z caller=main.go:241 level=info build_context="(go=go1.19.4, user>
Jul 09 17:35:15 vmi1561561.contaboserver.net alertmanager[59520]: ts=2024-07-09T15:35:15.650Z caller=cluster.go:681 level=info component=cluster msg="Waiting>
Jul 09 17:35:15 vmi1561561.contaboserver.net alertmanager[59520]: ts=2024-07-09T15:35:15.708Z caller=coordinator.go:113 level=info component=configuration ms>
Jul 09 17:35:15 vmi1561561.contaboserver.net alertmanager[59520]: ts=2024-07-09T15:35:15.709Z caller=coordinator.go:126 level=info component=configuration ms>
Jul 09 17:35:15 vmi1561561.contaboserver.net alertmanager[59520]: ts=2024-07-09T15:35:15.726Z caller=tls_config.go:232 level=info msg="Listening on" address=>
Jul 09 17:35:15 vmi1561561.contaboserver.net alertmanager[59520]: ts=2024-07-09T15:35:15.726Z caller=tls_config.go:235 level=info msg="TLS is disabled." http>
Jul 09 17:35:17 vmi1561561.contaboserver.net alertmanager[59520]: ts=2024-07-09T15:35:17.650Z caller=cluster.go:706 level=info component=cluster msg="gossip >
Jul 09 17:35:25 vmi1561561.contaboserver.net alertmanager[59520]: ts=2024-07-09T15:35:25.652Z caller=cluster.go:698 level=info component=cluster msg="gossip >
```

<br />

# Uninstallation

To uninstall Prometheus Alertmanager, first stop the service:

```bash
./scripts/prometheus/alerts/prometheus_alert_stop.sh
```

Then, you can uninstall it by running:

```bash
./scripts/prometheus/alerts/prometheus_alert_teardown.sh
```

To check the service is down

```bash
sudo systemctl status alertmanager
```

You should see something like

```bash
○ alertmanager.service - Alertmanager
     Loaded: loaded (/etc/systemd/system/alertmanager.service; disabled; vendor preset: enabled)
     Active: inactive (dead)

Jul 09 17:35:15 vmi1561561.contaboserver.net alertmanager[59520]: ts=2024-07-09T15:35:15.708Z caller=coordinator.go:113 level=info component=configuration ms>
Jul 09 17:35:15 vmi1561561.contaboserver.net alertmanager[59520]: ts=2024-07-09T15:35:15.709Z caller=coordinator.go:126 level=info component=configuration ms>
Jul 09 17:35:15 vmi1561561.contaboserver.net alertmanager[59520]: ts=2024-07-09T15:35:15.726Z caller=tls_config.go:232 level=info msg="Listening on" address=>
Jul 09 17:35:15 vmi1561561.contaboserver.net alertmanager[59520]: ts=2024-07-09T15:35:15.726Z caller=tls_config.go:235 level=info msg="TLS is disabled." http>
Jul 09 17:35:17 vmi1561561.contaboserver.net alertmanager[59520]: ts=2024-07-09T15:35:17.650Z caller=cluster.go:706 level=info component=cluster msg="gossip >
Jul 09 17:35:25 vmi1561561.contaboserver.net alertmanager[59520]: ts=2024-07-09T15:35:25.652Z caller=cluster.go:698 level=info component=cluster msg="gossip >
Jul 09 17:36:50 vmi1561561.contaboserver.net alertmanager[59520]: ts=2024-07-09T15:36:50.153Z caller=main.go:583 level=info msg="Received SIGTERM, exiting gr>
Jul 09 17:36:50 vmi1561561.contaboserver.net systemd[1]: Stopping Alertmanager...
Jul 09 17:36:50 vmi1561561.contaboserver.net systemd[1]: alertmanager.service: Deactivated successfully.
Jul 09 17:36:50 vmi1561561.contaboserver.net systemd[1]: Stopped Alertmanager.
```
